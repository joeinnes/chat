<head>
  <title>Chat</title>
</head>

<body>
  {{#if loading}}
    {{> loading}}
  {{/if}}
  <div class="container">
    <header>
      <h1>Messages</h1>
      {{> loginButtons}}
    </header>

{{#if currentUser}}
    <form class="new-message pure-form">
      <input type="text" name="text" placeholder="Hi {{currentUser.username}}..." class="pure-input-1"/>
    </form>
    <ul>
      {{#each messages}}
        {{> message}}
      {{/each}}
    </ul>
    {{else}}
    <p>You need to sign in.</p>
    {{/if}}
  </div>
</body>

<template name="message">
  <div class="bubble{{#if usersOwn currentUser.username createdBy.username}} bubble-alt{{/if}}"><div class="pull-left">{{> avatar user=createdBy shape="circle"}}</div>{{text}}<br /><small class="time">{{createdBy.username}} - {{createdAtTime createdAt}}</small></div>
</template>

<template name="loading">
  <div>
    {{> spinner}}
  </div>
</template>
